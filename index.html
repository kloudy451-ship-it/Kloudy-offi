<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Coder PRO v11.7 - SplitView</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/editor/editor.main.min.css">
    <style>
        :root { --accent: #00d2ff; --bg: #000810; --border: rgba(0, 210, 255, 0.3); }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: #fff; overflow: hidden; font-family: monospace; }
        
        /* Сетка интерфейса */
        .app-container { display: flex; flex-direction: column; height: 100vh; }
        
        header { 
            height: 45px; background: rgba(0, 10, 25, 0.95); 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 0 15px; border-bottom: 1px solid var(--border); 
        }

        /* Главная рабочая область */
        #main-split { display: flex; flex: 1; overflow: hidden; }

        /* Редактор */
        #editor-container { flex: 1; position: relative; border-right: 1px solid var(--border); }
        
        /* Превью (Разделенный экран) */
        #preview-container { flex: 1; background: #fff; display: flex; flex-direction: column; }
        iframe { flex: 1; border: none; width: 100%; height: 100%; }

        /* Мобильная адаптация */
        @media (max-width: 800px) {
            #main-split { flex-direction: column; }
            #editor-container { border-right: none; border-bottom: 1px solid var(--border); }
        }

        .btn { 
            background: var(--accent); color: #000; border: none; 
            padding: 5px 15px; font-weight: bold; cursor: pointer; border-radius: 3px; 
        }

        /* Индикатор режима */
        .mode-tag { font-size: 10px; color: var(--accent); border: 1px solid var(--accent); padding: 2px 5px; border-radius: 3px; }
    </style>
</head>
<body>

<div class="app-container">
    <header>
        <div style="display:flex; align-items:center; gap:10px;">
            <span style="font-weight:bold; color:var(--accent);">CODER_PRO</span>
            <span class="mode-tag">SPLIT_MODE</span>
        </div>
        <button class="btn" onclick="runBuild()">RUN / REFRESH ▶</button>
    </header>

    <div id="main-split">
        <div id="editor-container">
            <div id="editor" style="height: 100%;"></div>
        </div>
        
        <div id="preview-container">
            <iframe id="preview-frame"></iframe>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/loader.min.js"></script>

<script>
    let editor, currentBlobUrl;

    require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs' } });
    require(['vs/editor/editor.main'], function() {
        editor = monaco.editor.create(document.getElementById('editor'), {
            value: `\n<h1 style="color: #00d2ff; text-align: center; font-family: sans-serif; margin-top: 50px;">SPLIT VIEW READY</h1>\n<p style="text-align:center; color: #555;">Попробуй изменить текст и нажать RUN</p>`,
            language: 'html',
            theme: 'vs-dark',
            automaticLayout: true,
            fontSize: 14,
            minimap: { enabled: false }
        });

        // Запуск при старте
        runBuild();
    });

    function runBuild() {
        if (currentBlobUrl) URL.revokeObjectURL(currentBlobUrl);
        
        const code = editor.getValue();
        const blob = new Blob([code], { type: 'text/html' });
        currentBlobUrl = URL.createObjectURL(blob);
        document.getElementById('preview-frame').src = currentBlobUrl;
    }

    // Обработка изменения размера окна
    window.addEventListener('resize', () => {
        if (editor) editor.layout();
    });
</script>
</body>
</html>
